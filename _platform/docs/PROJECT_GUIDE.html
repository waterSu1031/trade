<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trade System - í”„ë¡œì íŠ¸ ê°€ì´ë“œ</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({ startOnLoad: true });</script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f5f5;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 0;
            margin-bottom: 40px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        header h1 {
            text-align: center;
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        header p {
            text-align: center;
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        nav {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            position: sticky;
            top: 20px;
            z-index: 100;
        }
        
        nav ul {
            list-style: none;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
        }
        
        nav a {
            color: #667eea;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }
        
        nav a:hover {
            color: #764ba2;
        }
        
        .section {
            background: white;
            padding: 40px;
            margin-bottom: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 2em;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 10px;
        }
        
        h3 {
            color: #764ba2;
            margin: 20px 0 15px 0;
            font-size: 1.5em;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .feature-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        
        .feature-card h4 {
            color: #667eea;
            margin-bottom: 10px;
        }
        
        .tech-stack {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 15px 0;
        }
        
        .tech-badge {
            background: #667eea;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        th, td {
            text-align: left;
            padding: 12px;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background: #f8f9fa;
            font-weight: 600;
            color: #667eea;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
        }
        
        .diagram-container {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            overflow-x: auto;
        }
        
        .mermaid {
            text-align: center;
        }
        
        .alert {
            padding: 15px;
            margin: 20px 0;
            border-radius: 8px;
            border-left: 4px solid #667eea;
            background: #f0f4ff;
        }
        
        .btn {
            display: inline-block;
            padding: 10px 20px;
            background: #667eea;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            transition: background 0.3s;
            margin: 10px 5px;
        }
        
        .btn:hover {
            background: #764ba2;
        }
        
        .icon {
            font-size: 1.2em;
            margin-right: 5px;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .section {
                padding: 20px;
            }
            
            nav ul {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>ğŸš€ Trade System</h1>
            <p>ê°œì¸ ìë™í™” íŠ¸ë ˆì´ë”© ì‹œìŠ¤í…œ - í”„ë¡œì íŠ¸ ê°€ì´ë“œ</p>
        </div>
    </header>

    <div class="container">
        <nav>
            <ul>
                <li><a href="#overview">ê°œìš”</a></li>
                <li><a href="#architecture">ì•„í‚¤í…ì²˜</a></li>
                <li><a href="#services">ì„œë¹„ìŠ¤ êµ¬ì„±</a></li>
                <li><a href="#tech-stack">ê¸°ìˆ  ìŠ¤íƒ</a></li>
                <li><a href="#deployment">ë°°í¬</a></li>
                <li><a href="#monitoring">ëª¨ë‹ˆí„°ë§</a></li>
                <li><a href="#quick-start">ë¹ ë¥¸ ì‹œì‘</a></li>
            </ul>
        </nav>

        <section id="overview" class="section">
            <h2>ğŸ“‹ í”„ë¡œì íŠ¸ ê°œìš”</h2>
            
            <div class="feature-grid">
                <div class="feature-card">
                    <h4>ğŸ¯ MSA ì•„í‚¤í…ì²˜</h4>
                    <p>ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ê¸°ë°˜ì˜ í™•ì¥ ê°€ëŠ¥í•œ ì„¤ê³„ë¡œ ê° ì„œë¹„ìŠ¤ê°€ ë…ë¦½ì ìœ¼ë¡œ ë°°í¬ ë° í™•ì¥ ê°€ëŠ¥</p>
                </div>
                <div class="feature-card">
                    <h4>ğŸ¤– ìë™í™” íŠ¸ë ˆì´ë”©</h4>
                    <p>Interactive Brokers APIë¥¼ í†µí•œ ì‹¤ì‹œê°„ ì‹œì¥ ë°ì´í„° ìˆ˜ì‹  ë° ìë™ ì£¼ë¬¸ ì‹¤í–‰</p>
                </div>
                <div class="feature-card">
                    <h4>ğŸ“Š ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§</h4>
                    <p>Grafana ëŒ€ì‹œë³´ë“œë¥¼ í†µí•œ ì‹œìŠ¤í…œ ë©”íŠ¸ë¦­, íŠ¸ë ˆì´ë”© ì„±ê³¼ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§</p>
                </div>
                <div class="feature-card">
                    <h4>ğŸ”„ CI/CD íŒŒì´í”„ë¼ì¸</h4>
                    <p>GitHub Actionsë¥¼ í™œìš©í•œ ìë™í™”ëœ ë¹Œë“œ, í…ŒìŠ¤íŠ¸, ë°°í¬ í”„ë¡œì„¸ìŠ¤</p>
                </div>
            </div>

            <div class="alert">
                <strong>ğŸ’¡ í•µì‹¬ ëª©í‘œ:</strong> ê°œì¸ íˆ¬ììë¥¼ ìœ„í•œ ì „ë¬¸ê°€ ìˆ˜ì¤€ì˜ íŠ¸ë ˆì´ë”© ì‹œìŠ¤í…œì„ ì œê³µí•˜ì—¬ 
                ì•ˆì •ì ì´ê³  íš¨ìœ¨ì ì¸ ìë™í™” íŠ¸ë ˆì´ë”© í™˜ê²½ì„ êµ¬ì¶•í•©ë‹ˆë‹¤.
            </div>
        </section>

        <section id="architecture" class="section">
            <h2>ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜</h2>
            
            <div class="diagram-container">
                <div class="mermaid">
                    graph TB
                        subgraph "External Services"
                            IB[IB Gateway<br/>Port: 4002]
                            GH[GitHub]
                            DH[Docker Hub]
                        end
                        
                        subgraph "Frontend Layer"
                            UI[SvelteKit App<br/>Port: 3000]
                        end
                        
                        subgraph "Backend Services"
                            API[FastAPI Backend<br/>Port: 8000]
                            BATCH[Spring Boot Batch<br/>Port: 8080]
                            ENGINE[Python Engine<br/>Port: 8001]
                        end
                        
                        subgraph "Data Layer"
                            PG[(PostgreSQL<br/>Port: 5432)]
                            REDIS[(Redis<br/>Port: 6379)]
                        end
                        
                        subgraph "Infrastructure"
                            NGINX[Nginx<br/>Port: 80/443]
                            DOCKER[Docker Compose]
                        end
                        
                        UI --> NGINX
                        NGINX --> API
                        API --> PG
                        API --> REDIS
                        API --> IB
                        BATCH --> PG
                        BATCH --> IB
                        ENGINE --> PG
                        ENGINE --> IB
                </div>
            </div>

            <h3>ì£¼ìš” êµ¬ì„±ìš”ì†Œ</h3>
            <ul>
                <li><strong>Frontend:</strong> SvelteKit ê¸°ë°˜ì˜ ë°˜ì‘í˜• ì›¹ ì¸í„°í˜ì´ìŠ¤</li>
                <li><strong>Backend:</strong> FastAPIì™€ Spring Bootë¥¼ í™œìš©í•œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤</li>
                <li><strong>Database:</strong> PostgreSQL (ì£¼ ë°ì´í„°ë² ì´ìŠ¤) + Redis (ìºì‹±)</li>
                <li><strong>Infrastructure:</strong> Docker Compose ê¸°ë°˜ ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜</li>
            </ul>
        </section>

        <section id="services" class="section">
            <h2>ğŸ”§ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ êµ¬ì„±</h2>
            
            <table>
                <thead>
                    <tr>
                        <th>ì„œë¹„ìŠ¤ëª…</th>
                        <th>ê¸°ìˆ  ìŠ¤íƒ</th>
                        <th>ì£¼ìš” ê¸°ëŠ¥</th>
                        <th>í¬íŠ¸</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>trade_frontend</strong></td>
                        <td>TypeScript, SvelteKit</td>
                        <td>ì›¹ UI, ì‹¤ì‹œê°„ ì°¨íŠ¸, ëŒ€ì‹œë³´ë“œ</td>
                        <td>3000</td>
                    </tr>
                    <tr>
                        <td><strong>trade_dashboard</strong></td>
                        <td>Python, FastAPI</td>
                        <td>REST API, WebSocket, ë°ì´í„° ê´€ë¦¬</td>
                        <td>8000</td>
                    </tr>
                    <tr>
                        <td><strong>trade_engine</strong></td>
                        <td>Python</td>
                        <td>íŠ¸ë ˆì´ë”© ì „ëµ ì‹¤í–‰, ì‹ í˜¸ ìƒì„±</td>
                        <td>8001</td>
                    </tr>
                    <tr>
                        <td><strong>trade_batch</strong></td>
                        <td>Java, Spring Boot</td>
                        <td>ë°°ì¹˜ ì‘ì—…, ìŠ¤ì¼€ì¤„ë§, í—¬ìŠ¤ì²´í¬</td>
                        <td>8080</td>
                    </tr>
                </tbody>
            </table>

            <h3>ë°ì´í„° íë¦„</h3>
            <div class="diagram-container">
                <div class="mermaid">
                    sequenceDiagram
                        participant User
                        participant Frontend
                        participant API
                        participant Engine
                        participant IBKR
                        participant DB
                        
                        User->>Frontend: ì „ëµ ì„¤ì •
                        Frontend->>API: REST API ìš”ì²­
                        API->>DB: ì„¤ì • ì €ì¥
                        API->>Engine: ì „ëµ ì‹¤í–‰ ìš”ì²­
                        Engine->>IBKR: ì‹œì¥ ë°ì´í„° ìš”ì²­
                        IBKR-->>Engine: ì‹¤ì‹œê°„ ë°ì´í„°
                        Engine->>Engine: ì‹ í˜¸ ìƒì„±
                        Engine->>IBKR: ì£¼ë¬¸ ì‹¤í–‰
                        Engine->>DB: ê±°ë˜ ê¸°ë¡
                        API-->>Frontend: WebSocket ì—…ë°ì´íŠ¸
                        Frontend-->>User: ì‹¤ì‹œê°„ ìƒíƒœ
                </div>
            </div>
        </section>

        <section id="tech-stack" class="section">
            <h2>ğŸ’» ê¸°ìˆ  ìŠ¤íƒ</h2>
            
            <h3>Frontend</h3>
            <div class="tech-stack">
                <span class="tech-badge">SvelteKit</span>
                <span class="tech-badge">TypeScript</span>
                <span class="tech-badge">TailwindCSS</span>
                <span class="tech-badge">Chart.js</span>
                <span class="tech-badge">WebSocket</span>
            </div>

            <h3>Backend</h3>
            <div class="tech-stack">
                <span class="tech-badge">Python 3.11</span>
                <span class="tech-badge">FastAPI</span>
                <span class="tech-badge">Java 17</span>
                <span class="tech-badge">Spring Boot</span>
                <span class="tech-badge">SQLAlchemy</span>
                <span class="tech-badge">JPA</span>
            </div>

            <h3>Database</h3>
            <div class="tech-stack">
                <span class="tech-badge">PostgreSQL 15</span>
                <span class="tech-badge">Redis 7</span>
                <span class="tech-badge">SQLite</span>
            </div>

            <h3>Infrastructure</h3>
            <div class="tech-stack">
                <span class="tech-badge">Docker</span>
                <span class="tech-badge">Docker Compose</span>
                <span class="tech-badge">Nginx</span>
                <span class="tech-badge">GitHub Actions</span>
            </div>

            <h3>Monitoring</h3>
            <div class="tech-stack">
                <span class="tech-badge">Prometheus</span>
                <span class="tech-badge">Grafana</span>
                <span class="tech-badge">Loki</span>
                <span class="tech-badge">Promtail</span>
            </div>

            <h3>Trading</h3>
            <div class="tech-stack">
                <span class="tech-badge">Interactive Brokers API</span>
                <span class="tech-badge">ib-insync</span>
                <span class="tech-badge">vectorbtpro</span>
                <span class="tech-badge">TA-Lib</span>
            </div>
        </section>

        <section id="deployment" class="section">
            <h2>ğŸš€ ë°°í¬ êµ¬ì¡°</h2>
            
            <h3>Docker Compose í™˜ê²½</h3>
            <table>
                <thead>
                    <tr>
                        <th>íŒŒì¼ëª…</th>
                        <th>ìš©ë„</th>
                        <th>í¬í•¨ ì„œë¹„ìŠ¤</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>docker-compose.yml</code></td>
                        <td>ê¸°ë³¸ ìš´ì˜ í™˜ê²½</td>
                        <td>DB, Redis, Backend, Frontend, Nginx</td>
                    </tr>
                    <tr>
                        <td><code>docker-compose.dev.yml</code></td>
                        <td>ê°œë°œ í™˜ê²½</td>
                        <td>í•« ë¦¬ë¡œë“œ, ë””ë²„ê·¸ í¬íŠ¸ í™œì„±í™”</td>
                    </tr>
                    <tr>
                        <td><code>docker-compose.full.yml</code></td>
                        <td>ì „ì²´ ìŠ¤íƒ</td>
                        <td>ëª¨ë‹ˆí„°ë§ ìŠ¤íƒ í¬í•¨ (PLG Stack)</td>
                    </tr>
                </tbody>
            </table>

            <h3>ë°°í¬ ëª…ë ¹ì–´</h3>
            <div class="code-block">
# ê°œë°œ í™˜ê²½ ì‹œì‘
cd trade_infra/docker/compose
docker-compose -f docker-compose.dev.yml up -d

# ìš´ì˜ í™˜ê²½ ì‹œì‘
docker-compose up -d

# ì „ì²´ ìŠ¤íƒ ì‹œì‘ (ëª¨ë‹ˆí„°ë§ í¬í•¨)
docker-compose -f docker-compose.full.yml up -d

# ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
docker-compose ps

# ë¡œê·¸ í™•ì¸
docker-compose logs -f [service_name]
            </div>
        </section>

        <section id="monitoring" class="section">
            <h2>ğŸ“Š ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ</h2>
            
            <h3>PLG Stack (Prometheus + Loki + Grafana)</h3>
            <div class="diagram-container">
                <div class="mermaid">
                    graph LR
                        subgraph "Applications"
                            A1[trade_frontend]
                            A2[trade_dashboard]
                            A3[trade_engine]
                            A4[trade_batch]
                        end
                        
                        subgraph "Metrics"
                            PROM[Prometheus<br/>:9090]
                            NE[Node Exporter]
                            PE[Postgres Exporter]
                            RE[Redis Exporter]
                        end
                        
                        subgraph "Logs"
                            LOKI[Loki<br/>:3100]
                            PROMTAIL[Promtail]
                        end
                        
                        subgraph "Visualization"
                            GRAFANA[Grafana<br/>:3001]
                        end
                        
                        A1 --> PROM
                        A2 --> PROM
                        A3 --> PROM
                        A4 --> PROM
                        
                        A1 -.-> PROMTAIL
                        A2 -.-> PROMTAIL
                        A3 -.-> PROMTAIL
                        A4 -.-> PROMTAIL
                        
                        PROMTAIL --> LOKI
                        PROM --> GRAFANA
                        LOKI --> GRAFANA
                </div>
            </div>

            <h3>ëŒ€ì‹œë³´ë“œ ì ‘ì†</h3>
            <ul>
                <li><strong>Grafana:</strong> <a href="http://localhost:3001" target="_blank">http://localhost:3001</a> (freeksj / [REDACTED])</li>
                <li><strong>Prometheus:</strong> <a href="http://localhost:9090" target="_blank">http://localhost:9090</a></li>
                <li><strong>Loki:</strong> Grafanaë¥¼ í†µí•´ ì ‘ê·¼</li>
            </ul>
        </section>

        <section id="quick-start" class="section">
            <h2>âš¡ ë¹ ë¥¸ ì‹œì‘ ê°€ì´ë“œ</h2>
            
            <h3>1. í™˜ê²½ ì„¤ì •</h3>
            <div class="code-block">
# ì €ì¥ì†Œ í´ë¡ 
git clone https://github.com/your-username/trade.git
cd trade

# í™˜ê²½ë³€ìˆ˜ ì„¤ì •
cp .env.example .env.development
# .env.development íŒŒì¼ í¸ì§‘í•˜ì—¬ í•„ìš”í•œ ê°’ ì„¤ì •
            </div>

            <h3>2. Docker ì»¨í…Œì´ë„ˆ ì‹œì‘</h3>
            <div class="code-block">
# ê°œë°œ í™˜ê²½ìœ¼ë¡œ ì‹œì‘
cd trade_infra/docker/compose
docker-compose -f docker-compose.dev.yml up -d

# ìƒíƒœ í™•ì¸
docker-compose ps
            </div>

            <h3>3. ì„œë¹„ìŠ¤ ì ‘ì†</h3>
            <ul>
                <li><strong>Frontend:</strong> <a href="http://localhost:3000" target="_blank">http://localhost:3000</a></li>
                <li><strong>API ë¬¸ì„œ:</strong> <a href="http://localhost:8000/docs" target="_blank">http://localhost:8000/docs</a></li>
                <li><strong>Grafana:</strong> <a href="http://localhost:3001" target="_blank">http://localhost:3001</a></li>
            </ul>

            <h3>4. í…ŒìŠ¤íŠ¸ ì‹¤í–‰</h3>
            <div class="code-block">
# Docker ì„œë¹„ìŠ¤ í…ŒìŠ¤íŠ¸
./trade_infra/docker/scripts/test-docker.sh

# ê°œë³„ ì„œë¹„ìŠ¤ í…ŒìŠ¤íŠ¸
docker-compose exec backend pytest
docker-compose exec batch ./mvnw test
            </div>

            <div class="alert">
                <strong>ğŸ“Œ ì¤‘ìš”:</strong> Interactive Brokers ê³„ì •ê³¼ IB Gateway/TWSê°€ ì‹¤í–‰ ì¤‘ì´ì–´ì•¼ íŠ¸ë ˆì´ë”© ê¸°ëŠ¥ì´ ì‘ë™í•©ë‹ˆë‹¤.
                Paper Tradingì€ í¬íŠ¸ 4002, Live Tradingì€ í¬íŠ¸ 4001ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
            </div>

            <div style="text-align: center; margin-top: 40px;">
                <a href="https://github.com/your-username/trade" class="btn">
                    <span class="icon">ğŸ“¦</span> GitHub ì €ì¥ì†Œ
                </a>
                <a href="/docs/OPERATIONS.md" class="btn">
                    <span class="icon">ğŸ“–</span> ìš´ì˜ ê°€ì´ë“œ
                </a>
                <a href="/docs/ACCOUNTS_AND_ACCESS.md" class="btn">
                    <span class="icon">ğŸ”‘</span> ê³„ì • ì •ë³´
                </a>
            </div>
        </section>
    </div>

    <footer style="background: #333; color: white; text-align: center; padding: 20px; margin-top: 40px;">
        <p>&copy; 2024 Trade System. All rights reserved.</p>
    </footer>
</body>
</html>